@custom-variant dark (&:is(.dark *));

:root {
  --font-size: 16px;
  
  /* Typography scale - 명확한 크기 차이 */
  --text-xs: 0.75rem;     /* 12px - 매우 작은 텍스트 */
  --text-sm: 0.875rem;    /* 14px - 본문 텍스트 */
  --text-base: 1rem;      /* 16px - 기본 크기 */
  --text-lg: 1.125rem;    /* 18px - 소제목 */
  --text-xl: 1.25rem;     /* 20px - 중제목 */
  --text-2xl: 1.5rem;     /* 24px - 대제목 */
  --text-3xl: 1.875rem;   /* 30px - 페이지 타이틀 */
  
  --background: #ffffff;
  --foreground: oklch(0.145 0 0);
  --card: #ffffff;
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: #030213;
  --primary-foreground: oklch(1 0 0);
  --secondary: oklch(0.95 0.0058 264.53);
  --secondary-foreground: #030213;
  --muted: #ececf0;
  --muted-foreground: #717182;
  --accent: #e9ebef;
  --accent-foreground: #030213;
  --destructive: #d4183d;
  --destructive-foreground: #ffffff;
  --border: rgba(0, 0, 0, 0.1);
  --input: transparent;
  --input-background: #f3f3f5;
  --switch-background: #cbced4;
  --font-weight-medium: 500;
  --font-weight-normal: 400;
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --radius: 0.625rem;
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: #030213;
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.145 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.145 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.985 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.396 0.141 25.723);
  --destructive-foreground: oklch(0.637 0.237 25.331);
  --border: oklch(0.269 0 0);
  --input: oklch(0.269 0 0);
  --ring: oklch(0.439 0 0);
  --font-weight-medium: 500;
  --font-weight-normal: 400;
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(0.269 0 0);
  --sidebar-ring: oklch(0.439 0 0);
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-input-background: var(--input-background);
  --color-switch-background: var(--switch-background);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/**
 * Base typography. This is not applied to elements which have an ancestor with a Tailwind text class.
 */
@layer base {
  :where(:not(:has([class*=' text-']), :not(:has([class^='text-'])))) {
    h1 {
      font-size: var(--text-2xl);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    h2 {
      font-size: var(--text-xl);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    h3 {
      font-size: var(--text-lg);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    h4 {
      font-size: var(--text-base);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    p {
      font-size: var(--text-base);
      font-weight: var(--font-weight-normal);
      line-height: 1.5;
    }

    label {
      font-size: var(--text-base);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    button {
      font-size: var(--text-base);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    input {
      font-size: var(--text-base);
      font-weight: var(--font-weight-normal);
      line-height: 1.5;
    }
  }
}

html {
  font-size: var(--font-size);
}

/*
 * Blur Position Synchronization System
 * 화면과 PDF 출력 시 블러 위치가 동일하도록 보장
 *
 * 핵심 문제:
 *   - 화면: min-h-screen (가변 높이, 예: 900px)
 *   - PDF: h-[297mm] (고정 A4 높이, 약 1123px)
 *   - 블러 위치가 컨테이너 기준 %로 저장됨
 *   - 같은 %가 다른 픽셀 위치를 가리킴
 *
 * 해결: 블러가 있는 페이지는 화면에서도 A4 높이를 사용
 *       → 화면과 PDF의 컨테이너 크기가 동일해짐
 *       → 동일한 % 위치 = 동일한 픽셀 위치
 */

/* 블러 컨테이너 기본 스타일 */
.blur-container {
  position: relative;
}

/*
 * 블러 모드 활성화 또는 블러 영역이 있는 페이지:
 * 화면에서도 A4 높이를 강제 적용하여 PDF와 동일한 레이아웃 보장
 *
 * 핵심: 블러 모드 진입 즉시 A4 높이를 적용하여
 *       사용자가 블러 영역을 그릴 때 이미 PDF와 동일한 컨테이너 크기를 사용
 */
.blur-container[data-blur-mode="true"],
.blur-container[data-has-blur="true"] {
  /* 화면에서도 A4 높이 사용하여 PDF와 동일한 컨테이너 크기 */
  min-height: 297mm !important;
  height: 297mm !important;
  /* 콘텐츠가 넘치면 스크롤 */
  overflow: auto;
  /* 상단 정렬로 콘텐츠 시작 위치 일치 */
  justify-content: flex-start !important;
}

/* 인쇄 시 블러 컨테이너 스타일 */
@media print {
  .blur-container {
    /* 인쇄 시에도 A4 높이 유지 */
    height: 297mm !important;
    min-height: 297mm !important;
    /* 상단 정렬 유지 */
    justify-content: flex-start !important;
  }
}

/* Print styles for PDF output */
@media print {
  @page {
    size: A4;
    margin: 5mm;
  }

  body {
    margin: 0;
    padding: 0;
    background: white !important;
  }

  .print-mode {
    background: white;
  }

  .print-page {
    width: 210mm;
    height: 297mm;
    page-break-after: always;
    page-break-inside: avoid;
    position: relative;
    background: white;
    overflow: hidden;
  }

  .print-page:last-child {
    page-break-after: auto;
  }

  /* Allow detailed schedule pages to span multiple pages */
  .print-page.detailed-schedule-page {
    height: auto;
    min-height: 297mm;
    page-break-inside: auto;
    overflow: visible;
  }

  /* Allow flight pages to span multiple pages */
  .print-page.flight-departure-page,
  .print-page.flight-arrival-page,
  .print-page.flight-transit-page {
    height: auto;
    min-height: 297mm;
    page-break-inside: auto;
    overflow: visible;
  }

  /* Allow all other pages to span multiple pages */
  .print-page.cover-page,
  .print-page.intro-page,
  .print-page.itinerary-page,
  .print-page.accommodation-page,
  .print-page.quotation-page,
  .print-page.process-page,
  .print-page.payment-page,
  .print-page.transportation-ticket-page,
  .print-page.transportation-card-page {
    height: auto;
    min-height: 297mm;
    page-break-inside: auto;
    overflow: visible;
  }

  /* Hide navigation elements */
  .print\:hidden {
    display: none !important;
  }

  /* Force desktop layout for print */
  .md\:hidden {
    display: none !important;
  }

  .hidden.md\:block {
    display: block !important;
  }

  .hidden.md\:grid {
    display: grid !important;
  }

  .hidden.md\:flex {
    display: flex !important;
  }

  /* Ensure all content is visible */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }

  /* 요소 기반 블러 - PDF 출력 시 완전 가림 (세련된 분홍색 디자인) */
  .blur-active,
  [data-blur-active="true"] {
    position: relative;
    color: transparent !important;
    text-shadow: none !important;
    background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 50%, #fce4ec 100%) !important;
    border-radius: 6px;
    user-select: none;
    filter: none !important;
    overflow: hidden;
    box-shadow: inset 0 0 0 1px rgba(236, 64, 122, 0.15);
  }

  /* 자식 요소들도 숨김 처리 */
  .blur-active *,
  [data-blur-active="true"] * {
    color: transparent !important;
    background: transparent !important;
    border-color: transparent !important;
    text-shadow: none !important;
    box-shadow: none !important;
  }

  /* 이미지와 SVG 숨김 */
  .blur-active img,
  .blur-active svg,
  [data-blur-active="true"] img,
  [data-blur-active="true"] svg {
    opacity: 0 !important;
  }

  .blur-active::after,
  [data-blur-active="true"]::after {
    content: '';
    position: absolute;
    inset: 0;
    /* 부드러운 핑크 웨이브 패턴 */
    background:
      radial-gradient(ellipse 80% 50% at 20% 50%, rgba(244, 143, 177, 0.4) 0%, transparent 50%),
      radial-gradient(ellipse 60% 40% at 80% 30%, rgba(240, 98, 146, 0.3) 0%, transparent 50%),
      radial-gradient(ellipse 70% 60% at 50% 80%, rgba(248, 187, 208, 0.4) 0%, transparent 50%),
      linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%);
    border-radius: 6px;
    z-index: 10;
  }
}

/*
 * 요소 기반 블러 시스템
 *
 * data-blur-key: 블러 가능한 요소 식별자
 * .blur-active: 블러가 적용된 요소
 * .blur-hover: 호버 시 하이라이트
 */

/* 블러 가능한 요소 기본 스타일 */
[data-blur-key] {
  transition: outline 0.15s ease, background-color 0.15s ease;
}

/* 블러 모드에서 호버 시 하이라이트 */
.blur-hover {
  outline: 2px dashed #8b5cf6 !important;
  outline-offset: 2px;
  cursor: pointer !important;
  background-color: rgba(139, 92, 246, 0.1) !important;
}

/* 블러가 적용된 요소 - 화면 표시 */
.blur-active {
  position: relative;
  filter: blur(8px);
  user-select: none;
  pointer-events: none;
}

/* 블러가 적용된 요소 - 블러 모드에서 표시 (편집 가능하도록) */
.blur-active.blur-hover {
  filter: blur(4px);
  pointer-events: auto;
  cursor: pointer !important;
}

/* 블러된 요소 표시 (블러 모드 아닐 때) */
.blur-active::before {
  content: '';
  position: absolute;
  inset: -2px;
  border: 2px dashed #dc2626;
  border-radius: 4px;
  pointer-events: none;
}